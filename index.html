<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCP ê¸°ë°˜ ì·¨ì—…ê·œì¹™ AI ìë™í™” POC</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <div class="header glass-card">
            <h1><i class="fas fa-robot"></i> MCP ê¸°ë°˜ ì·¨ì—…ê·œì¹™ AI ìë™í™” í”Œë«í¼ (POC)</h1>
            <p>AI ê¸°ë°˜ ì·¨ì—…ê·œì¹™ ìë™ ìƒì„± ë° ë²•ë ¹ ì¤€ìˆ˜ ê²€í†  ì‹œìŠ¤í…œ</p>
        </div>
        
        <div class="tabs">
            <button class="tab active" onclick="switchTab('generate')">
                <span><i class="fas fa-magic"></i> ê·œì¹™ ìƒì„±</span>
            </button>
            <button class="tab" onclick="switchTab('review')">
                <span><i class="fas fa-search"></i> ê·œì¹™ ê²€í† </span>
            </button>
            <button class="tab" onclick="switchTab('compare')">
                <span><i class="fas fa-chart-bar"></i> ë¹„êµ ë¶„ì„</span>
            </button>
        </div>
        
        <!-- ê·œì¹™ ìƒì„± íƒ­ -->
        <div id="generate" class="tab-content active">
            <div class="section-header">
                <i class="fas fa-magic icon"></i>
                <h2>ì·¨ì—…ê·œì¹™ ìë™ ìƒì„±</h2>
            </div>
            
            <div class="form-section">
                <div class="form-panel">
                    <div class="form-group">
                        <label for="companyName">
                            <i class="fas fa-building"></i>
                            íšŒì‚¬ëª…
                        </label>
                        <input type="text" id="companyName" placeholder="ì£¼ì‹íšŒì‚¬ ìƒ˜í”Œ" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="industry">
                            <i class="fas fa-industry"></i>
                            ì—…ì¢…
                        </label>
                        <select id="industry" required>
                            <option value="">ì—…ì¢… ì„ íƒ</option>
                            <option value="manufacturing">ğŸ­ ì œì¡°ì—…</option>
                            <option value="it">ğŸ’» ì •ë³´í†µì‹ ì—…</option>
                            <option value="retail">ğŸ›ï¸ ë„ì†Œë§¤ì—…</option>
                            <option value="finance">ğŸ¦ ê¸ˆìœµì—…</option>
                            <option value="construction">ğŸ—ï¸ ê±´ì„¤ì—…</option>
                            <option value="service">ğŸ”§ ì„œë¹„ìŠ¤ì—…</option>
                            <option value="food">ğŸ½ï¸ ìŒì‹ì ì—…</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="employeeCount">
                            <i class="fas fa-users"></i>
                            ì§ì› ìˆ˜
                        </label>
                        <input type="number" id="employeeCount" placeholder="50" min="1" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="workingHours">
                            <i class="fas fa-clock"></i>
                            ê·¼ë¬´ì‹œê°„
                        </label>
                        <select id="workingHours">
                            <option value="9to6">09:00 - 18:00</option>
                            <option value="8to5">08:00 - 17:00</option>
                            <option value="10to7">10:00 - 19:00</option>
                            <option value="flexible">ìœ ì—°ê·¼ë¬´ì œ</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="specialProvisions">
                            <i class="fas fa-edit"></i>
                            íŠ¹ë³„ ì¡°í•­
                        </label>
                        <textarea id="specialProvisions" placeholder="íšŒì‚¬ë³„ íŠ¹ë³„í•œ ê·œì •ì´ë‚˜ ì¡°í•­ì„ ì…ë ¥í•˜ì„¸ìš”..."></textarea>
                    </div>
                </div>
                
                <div class="form-panel preview-section">
                    <h3><i class="fas fa-file-alt"></i> ìƒì„±ëœ ì·¨ì—…ê·œì¹™ ë¯¸ë¦¬ë³´ê¸°</h3>
                    <div id="generatedRules">
                        <div style="color: #94a3b8; text-align: center; padding: 60px 20px;">
                            <i class="fas fa-arrow-left" style="font-size: 2rem; margin-bottom: 16px; opacity: 0.5;"></i>
                            <p style="font-size: 18px; font-weight: 500;">ì¢Œì¸¡ ì •ë³´ë¥¼ ì…ë ¥í•˜ê³  "ê·œì¹™ ìƒì„±" ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.</p>
                            <p style="font-size: 14px; margin-top: 8px; opacity: 0.7;">AIê°€ ìë™ìœ¼ë¡œ ë²•ë ¹ì— ë§ëŠ” ì™„ì „í•œ ì·¨ì—…ê·œì¹™ì„ ìƒì„±í•©ë‹ˆë‹¤.</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="action-buttons">
                <button class="btn btn-primary" onclick="generateRules()">
                    <i class="fas fa-magic"></i> ê·œì¹™ ìƒì„±
                </button>
                <button class="btn btn-secondary" onclick="downloadRules()">
                    <i class="fas fa-download"></i> ë‹¤ìš´ë¡œë“œ
                </button>
                <button class="btn btn-success" onclick="autoReview()">
                    <i class="fas fa-search"></i> ìë™ ê²€í† 
                </button>
            </div>
            
            <div class="loading" id="generateLoading">
                <div class="spinner"></div>
                <p><i class="fas fa-cog fa-spin"></i> AIê°€ ì™„ì „í•œ ì·¨ì—…ê·œì¹™ì„ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤...</p>
            </div>
        </div>
        
        <!-- ê·œì¹™ ê²€í†  íƒ­ -->
        <!-- ê¸°ì¡´ ê²€í†  íƒ­ ë‚´ìš©ì„ ì´ê²ƒìœ¼ë¡œ êµì²´ -->
<div id="review" class="tab-content">
    <div class="section-header">
        <i class="fas fa-search icon"></i>
        <h2>ì·¨ì—…ê·œì¹™ ìë™ ê²€í† </h2>
    </div>
    
    <!-- ìƒˆë¡œ ì¶”ê°€: ì…ë ¥ ë°©ì‹ ì„ íƒ -->
    <div class="input-method-selector">
        <div class="method-card active" data-method="upload" onclick="switchInputMethod('upload')">
            <i class="fas fa-cloud-upload-alt"></i>
            <h4>íŒŒì¼ ì—…ë¡œë“œ</h4>
            <p>ê¸°ì¡´ ì·¨ì—…ê·œì¹™ íŒŒì¼</p>
        </div>
        <div class="method-card" data-method="manual" onclick="switchInputMethod('manual')">
            <i class="fas fa-keyboard"></i>
            <h4>ì§ì ‘ ì…ë ¥</h4>
            <p>í…ìŠ¤íŠ¸ë¡œ ì§ì ‘ ì‘ì„±</p>
        </div>
    </div>
    
    <div class="form-section">
        <div class="form-panel">
            <!-- ìƒˆë¡œ ì¶”ê°€: íŒŒì¼ ì—…ë¡œë“œ ì„¹ì…˜ -->
            <div class="file-upload-section" id="uploadSection">
                <div class="form-group">
                    <label>
                        <i class="fas fa-cloud-upload-alt"></i>
                        ì·¨ì—…ê·œì¹™ íŒŒì¼ ì—…ë¡œë“œ
                    </label>
                    <div class="file-upload-area" id="fileUploadArea">
                        <input type="file" id="fileUpload" accept=".pdf,.docx,.hwp,.txt">
                        <div class="upload-placeholder">
                            <i class="fas fa-file-upload"></i>
                            <p>ê¸°ì¡´ ì·¨ì—…ê·œì¹™ íŒŒì¼ì„ ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì—…ë¡œë“œ</p>
                            <p>PDF, DOCX, HWP, TXT ì§€ì› (ìµœëŒ€ 10MB)</p>
                        </div>
                    </div>
                </div>
                
                <!-- ì—…ë¡œë“œ ê²°ê³¼ í‘œì‹œ (ìˆ¨ê¹€ ìƒíƒœ) -->
                <div class="upload-result hidden" id="uploadResult">
                    <div class="file-info">
                        <i class="fas fa-file-check"></i>
                        <span id="fileName">íŒŒì¼ëª….pdf</span>
                        <button class="btn-small" onclick="previewFile()">ë¯¸ë¦¬ë³´ê¸°</button>
                        <button class="btn-small" onclick="removeFile()" style="background: rgba(239, 68, 68, 0.2); border-color: #ef4444;">ì œê±°</button>
                    </div>
                    <div class="auto-extracted" id="extractedInfo">
                        <h5><i class="fas fa-magic"></i> ìë™ ì¶”ì¶œëœ ì •ë³´</h5>
                        <p id="extractedCompany">íšŒì‚¬ëª…: ë¶„ì„ ì¤‘...</p>
                        <p id="extractedIndustry">ì—…ì¢…: ë¶„ì„ ì¤‘...</p>
                        <p id="extractedEmployees">ì§ì› ìˆ˜: ë¶„ì„ ì¤‘...</p>
                    </div>
                </div>
                
                <!-- ì—…ë¡œë“œ ë¡œë”© -->
                <div class="upload-loading" id="uploadLoading">
                    <div class="spinner"></div>
                    <p><i class="fas fa-cog fa-spin"></i> íŒŒì¼ì„ ë¶„ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤...</p>
                </div>
            </div>
            
            <!-- ê¸°ì¡´ ìˆ˜ë™ ì…ë ¥ ì„¹ì…˜ (ìˆ¨ê¹€ ìƒíƒœë¡œ ë³€ê²½) -->
            <div class="manual-input-section hidden" id="manualSection">
                <div class="form-group">
                    <label for="reviewCompany">
                        <i class="fas fa-building"></i>
                        íšŒì‚¬ëª…
                    </label>
                    <input type="text" id="reviewCompany" placeholder="ê²€í† í•  íšŒì‚¬ëª…">
                </div>
                
                <div class="form-group">
                    <label for="reviewIndustry">
                        <i class="fas fa-industry"></i>
                        ì—…ì¢…
                    </label>
                    <select id="reviewIndustry">
                        <option value="">ì—…ì¢… ì„ íƒ</option>
                        <option value="manufacturing">ğŸ­ ì œì¡°ì—…</option>
                        <option value="it">ğŸ’» ì •ë³´í†µì‹ ì—…</option>
                        <option value="retail">ğŸ›ï¸ ë„ì†Œë§¤ì—…</option>
                        <option value="finance">ğŸ¦ ê¸ˆìœµì—…</option>
                        <option value="construction">ğŸ—ï¸ ê±´ì„¤ì—…</option>
                        <option value="service">ğŸ”§ ì„œë¹„ìŠ¤ì—…</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="rulesText">
                        <i class="fas fa-file-text"></i>
                        ì·¨ì—…ê·œì¹™ ì›ë¬¸
                    </label>
                    <textarea id="rulesText" placeholder="ê²€í† í•  ì·¨ì—…ê·œì¹™ ì „ë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”..."></textarea>
                </div>
            </div>
        </div>
        
        <!-- ê¸°ì¡´ ê²°ê³¼ í‘œì‹œ ì„¹ì…˜ì€ ê·¸ëŒ€ë¡œ ìœ ì§€ -->
        <div class="form-panel">
            <div id="reviewResult" class="analysis-result" style="display: none;">
                <h3><i class="fas fa-clipboard-check"></i> ê²€í†  ê²°ê³¼</h3>
                <div id="riskLevel"></div>
                <div id="issues"></div>
                <div id="suggestions"></div>
            </div>
            
            <div id="noReviewYet" style="color: #94a3b8; text-align: center; padding: 60px 20px;">
                <i class="fas fa-search" style="font-size: 2rem; margin-bottom: 16px; opacity: 0.5;"></i>
                <p style="font-size: 18px; font-weight: 500;">íŒŒì¼ì„ ì—…ë¡œë“œí•˜ê±°ë‚˜ ì§ì ‘ ì…ë ¥í•˜ì—¬ ê²€í† ë¥¼ ì‹œì‘í•˜ì„¸ìš”.</p>
                <p style="font-size: 14px; margin-top: 8px; opacity: 0.7;">AIê°€ ë²•ë ¹ ì¤€ìˆ˜ ì—¬ë¶€ë¥¼ ìë™ìœ¼ë¡œ ë¶„ì„í•©ë‹ˆë‹¤.</p>
            </div>
        </div>
    </div>
    
    <!-- ê¸°ì¡´ ë²„íŠ¼ë“¤ì€ ê·¸ëŒ€ë¡œ ìœ ì§€ -->
    <div class="action-buttons">
        <button class="btn btn-primary" onclick="reviewRules()">
            <i class="fas fa-search"></i> ê²€í†  ì‹œì‘
        </button>
        <button class="btn btn-secondary" onclick="generateReport()">
            <i class="fas fa-file-alt"></i> ë³´ê³ ì„œ ìƒì„±
        </button>
    </div>
    
    <!-- ê¸°ì¡´ ë¡œë”©ì€ ê·¸ëŒ€ë¡œ ìœ ì§€ -->
    <div class="loading" id="reviewLoading">
        <div class="spinner"></div>
        <p><i class="fas fa-cog fa-spin"></i> AIê°€ ë²•ë ¹ ê¸°ë°˜ìœ¼ë¡œ ê²€í† í•˜ê³  ìˆìŠµë‹ˆë‹¤...</p>
    </div>
</div>
        
        <!-- ë¹„êµ ë¶„ì„ íƒ­ -->
        <div id="compare" class="tab-content">
            <div class="section-header">
                <i class="fas fa-chart-bar icon"></i>
                <h2>ì—…ì¢…ë³„ ë¹„êµ ë¶„ì„</h2>
            </div>
            
            <div class="form-section">
                <div class="form-panel">
                    <div class="form-group">
                        <label for="compareIndustry">
                            <i class="fas fa-industry"></i>
                            ë¹„êµ ì—…ì¢…
                        </label>
                        <select id="compareIndustry">
                            <option value="it">ğŸ’» ì •ë³´í†µì‹ ì—…</option>
                            <option value="manufacturing">ğŸ­ ì œì¡°ì—…</option>
                            <option value="finance">ğŸ¦ ê¸ˆìœµì—…</option>
                            <option value="retail">ğŸ›ï¸ ë„ì†Œë§¤ì—…</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="compareSize">
                            <i class="fas fa-users"></i>
                            íšŒì‚¬ ê·œëª¨
                        </label>
                        <select id="compareSize">
                            <option value="small">ğŸ¢ ì†Œê¸°ì—… (10-49ëª…)</option>
                            <option value="medium">ğŸ¬ ì¤‘ê¸°ì—… (50-299ëª…)</option>
                            <option value="large">ğŸ­ ëŒ€ê¸°ì—… (300ëª… ì´ìƒ)</option>
                        </select>
                    </div>
                    
                    <div class="info-card highlight">
                        <h4><i class="fas fa-info-circle"></i> ë¶„ì„ ë²”ìœ„</h4>
                        <p>â€¢ ì—…ì¢…ë³„ í‘œì¤€ ê·¼ë¡œì¡°ê±´ ë¹„êµ</p>
                        <p>â€¢ ê·œëª¨ë³„ ë³µë¦¬í›„ìƒ ìˆ˜ì¤€ ë¶„ì„</p>
                        <p>â€¢ ë²•ì  ë¦¬ìŠ¤í¬ ìš”ì†Œ ê²€í† </p>
                        <p>â€¢ ê°œì„  ê¶Œì¥ì‚¬í•­ ì œì‹œ</p>
                    </div>
                </div>
                
                <div class="form-panel preview-section">
                    <h3><i class="fas fa-chart-line"></i> ì—…ì¢…ë³„ í‘œì¤€ ê¸°ì¤€</h3>
                    <div id="comparisonResult">
                        <div style="color: #94a3b8; text-align: center; padding: 60px 20px;">
                            <i class="fas fa-chart-bar" style="font-size: 2rem; margin-bottom: 16px; opacity: 0.5;"></i>
                            <p style="font-size: 18px; font-weight: 500;">ë¶„ì„ì„ ì‹œì‘í•˜ë ¤ë©´ "ë¶„ì„ ì‹œì‘" ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.</p>
                            <p style="font-size: 14px; margin-top: 8px; opacity: 0.7;">ì—…ì¢…ë³„ í‘œì¤€ ê¸°ì¤€ê³¼ ë¹„êµ ë¶„ì„ ê²°ê³¼ë¥¼ ì œê³µí•©ë‹ˆë‹¤.</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="action-buttons">
                <button class="btn btn-primary" onclick="compareRules()">
                    <i class="fas fa-chart-bar"></i> ë¶„ì„ ì‹œì‘
                </button>
                <button class="btn btn-secondary" onclick="exportComparison()">
                    <i class="fas fa-file-export"></i> ë¹„êµí‘œ ë‚´ë³´ë‚´ê¸°
                </button>
            </div>
        </div>
    </div>

    <script>
        
// íƒ­ ì „í™˜ (ìˆ˜ì •ëœ ë²„ì „)
function switchTab(tabName) {
    // ëª¨ë“  íƒ­ ë¹„í™œì„±í™”
    document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
    document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
    
    // í´ë¦­ëœ íƒ­ ì°¾ì•„ì„œ í™œì„±í™” (ì•ˆì „í•œ ë°©ë²•)
    const clickedTab = document.querySelector(`[onclick="switchTab('${tabName}')"]`);
    if (clickedTab) {
        clickedTab.classList.add('active');
    }
    
    // í•´ë‹¹ íƒ­ ì½˜í…ì¸  í™œì„±í™”
    const targetContent = document.getElementById(tabName);
    if (targetContent) {
        targetContent.classList.add('active');
    }
}

// ì…ë ¥ ë°©ì‹ ì „í™˜
function switchInputMethod(method) {
    // ì¹´ë“œ í™œì„±í™” ìƒíƒœ ë³€ê²½
    document.querySelectorAll('.method-card').forEach(card => {
        card.classList.remove('active');
    });
    document.querySelector(`[data-method="${method}"]`).classList.add('active');
    
    // ì„¹ì…˜ í‘œì‹œ/ìˆ¨ê¹€
    const uploadSection = document.getElementById('uploadSection');
    const manualSection = document.getElementById('manualSection');
    
    if (uploadSection && manualSection) {
        if (method === 'upload') {
            uploadSection.classList.remove('hidden');
            manualSection.classList.add('hidden');
        } else {
            uploadSection.classList.add('hidden');
            manualSection.classList.remove('hidden');
        }
    }
    
    // ê²°ê³¼ ì´ˆê¸°í™”
    resetReviewResult();
}

// íŒŒì¼ ì—…ë¡œë“œ ì²˜ë¦¬
async function handleFileUpload(file) {
    // íŒŒì¼ í¬ê¸° ì²´í¬ (10MB)
    if (file.size > 10 * 1024 * 1024) {
        alert('íŒŒì¼ í¬ê¸°ëŠ” 10MB ì´í•˜ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.');
        return;
    }
    
    // íŒŒì¼ í˜•ì‹ ì²´í¬
    const allowedTypes = ['.pdf', '.docx', '.hwp', '.txt'];
    const fileExtension = '.' + file.name.split('.').pop().toLowerCase();
    if (!allowedTypes.includes(fileExtension)) {
        alert('ì§€ì›ë˜ëŠ” íŒŒì¼ í˜•ì‹: PDF, DOCX, HWP, TXT');
        return;
    }
    
    // ë¡œë”© í‘œì‹œ
    const uploadLoading = document.getElementById('uploadLoading');
    const uploadResult = document.getElementById('uploadResult');
    if (uploadLoading) uploadLoading.style.display = 'block';
    if (uploadResult) uploadResult.classList.add('hidden');
    
    try {
        // íŒŒì¼ ì½ê¸° ì‹œë®¬ë ˆì´ì…˜
        await new Promise(resolve => setTimeout(resolve, 2000));
        
        // íŒŒì¼ ë‚´ìš© ì½ê¸° (í…ìŠ¤íŠ¸ íŒŒì¼ì˜ ê²½ìš°)
        let fileContent = '';
        if (file.type === 'text/plain') {
            fileContent = await readTextFile(file);
        } else {
            // PDF, DOCXì˜ ê²½ìš° ì‹œë®¬ë ˆì´ì…˜
            fileContent = generateMockContent(file.name);
        }
        
        // íšŒì‚¬ ì •ë³´ ìë™ ì¶”ì¶œ
        const extractedInfo = extractCompanyInfo(fileContent, file.name);
        
        // ê²°ê³¼ í‘œì‹œ
        showUploadResult(file, extractedInfo, fileContent);
        
    } catch (error) {
        alert('íŒŒì¼ ì—…ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
    } finally {
        if (uploadLoading) uploadLoading.style.display = 'none';
    }
}

// í…ìŠ¤íŠ¸ íŒŒì¼ ì½ê¸°
function readTextFile(file) {
    return new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.onload = (e) => resolve(e.target.result);
        reader.onerror = reject;
        reader.readAsText(file, 'utf-8');
    });
}

// ëª¨ì˜ íŒŒì¼ ë‚´ìš© ìƒì„± (PDF, DOCX ì‹œë®¬ë ˆì´ì…˜)
function generateMockContent(fileName) {
    return `
        ${fileName.includes('ì‚¼ì„±') ? 'ì‚¼ì„±ì „ì' : 'OO'} ì·¨ì—…ê·œì¹™
        
        ì œ1ì¡° (ëª©ì ) ì´ ê·œì¹™ì€ íšŒì‚¬ì˜ ê·¼ë¡œìì˜ ì·¨ì—…ì— ê´€í•œ ì‚¬í•­ì„ ì •í•¨ì„ ëª©ì ìœ¼ë¡œ í•œë‹¤.
        ì œ2ì¡° (ì ìš©ë²”ìœ„) ì´ ê·œì¹™ì€ íšŒì‚¬ì˜ ëª¨ë“  ê·¼ë¡œìì—ê²Œ ì ìš©í•œë‹¤.
        ì œ3ì¡° (ê·¼ë¡œì‹œê°„) ì†Œì •ê·¼ë¡œì‹œê°„ì€ ì£¼ 40ì‹œê°„, 1ì¼ 8ì‹œê°„ìœ¼ë¡œ í•œë‹¤.
        ì œ4ì¡° (íœ´ê²Œì‹œê°„) ì ì‹¬ì‹œê°„ì€ 12:00~13:00 (1ì‹œê°„)ìœ¼ë¡œ í•œë‹¤.
        ì œ5ì¡° (ì—°ì°¨íœ´ê°€) 1ë…„ê°„ 8í•  ì´ìƒ ì¶œê·¼í•œ ê·¼ë¡œìì—ê²Œ 15ì¼ì˜ ìœ ê¸‰íœ´ê°€ë¥¼ ì¤€ë‹¤.
        ì œ6ì¡° (ì„ê¸ˆì§€ê¸‰) ì„ê¸ˆì€ ë§¤ì›” 25ì¼ì— ì§€ê¸‰í•œë‹¤.
        ì œ7ì¡° (ì§•ê³„) ê²¬ì±…, ê°ë´‰, ì •ì§, í•´ê³ ë¡œ êµ¬ë¶„í•œë‹¤.
        
        ì‹œí–‰ì¼: 2024.01.01
        ${fileName.includes('ì‚¼ì„±') ? 'ì‚¼ì„±ì „ì' : 'OO'} ì£¼ì‹íšŒì‚¬
        ëŒ€í‘œì´ì‚¬ (ì¸)
    `;
}

// íšŒì‚¬ ì •ë³´ ìë™ ì¶”ì¶œ
function extractCompanyInfo(content, fileName) {
    const info = {
        company: 'OO ì£¼ì‹íšŒì‚¬',
        industry: 'ì •ë³´í†µì‹ ì—…',
        employees: '100-300ëª… (ì¶”ì •)'
    };
    
    // ê°„ë‹¨í•œ íŒ¨í„´ ë§¤ì¹­ìœ¼ë¡œ ì •ë³´ ì¶”ì¶œ
    const companyMatch = content.match(/(ì£¼ì‹íšŒì‚¬|íšŒì‚¬)\s*([ê°€-í£a-zA-Z0-9\s]+)/);
    if (companyMatch) {
        info.company = companyMatch[0].trim();
    }
    
    // íŒŒì¼ëª…ì—ì„œ íšŒì‚¬ëª… ì¶”ì¶œ ì‹œë„
    if (fileName.includes('ì‚¼ì„±')) {
        info.company = 'ì‚¼ì„±ì „ì ì£¼ì‹íšŒì‚¬';
        info.industry = 'ì œì¡°ì—…';
        info.employees = '1000ëª… ì´ìƒ';
    } else if (fileName.includes('ë„¤ì´ë²„')) {
        info.company = 'ë„¤ì´ë²„ ì£¼ì‹íšŒì‚¬';
        info.industry = 'ì •ë³´í†µì‹ ì—…';
        info.employees = '500-1000ëª…';
    }
    
    // ì—…ì¢… ì¶”ì •
    if (content.includes('ì œì¡°') || content.includes('ìƒì‚°')) {
        info.industry = 'ì œì¡°ì—…';
    } else if (content.includes('ì •ë³´') || content.includes('IT') || content.includes('ì†Œí”„íŠ¸ì›¨ì–´')) {
        info.industry = 'ì •ë³´í†µì‹ ì—…';
    } else if (content.includes('ê¸ˆìœµ') || content.includes('ì€í–‰')) {
        info.industry = 'ê¸ˆìœµì—…';
    }
    
    return info;
}

// ì—…ë¡œë“œ ê²°ê³¼ í‘œì‹œ
function showUploadResult(file, extractedInfo, content) {
    // íŒŒì¼ ì •ë³´ í‘œì‹œ
    const fileName = document.getElementById('fileName');
    if (fileName) {
        fileName.textContent = `${file.name} (${(file.size / 1024).toFixed(1)}KB)`;
    }
    
    // ì¶”ì¶œëœ ì •ë³´ í‘œì‹œ
    const extractedCompany = document.getElementById('extractedCompany');
    const extractedIndustry = document.getElementById('extractedIndustry');
    const extractedEmployees = document.getElementById('extractedEmployees');
    
    if (extractedCompany) extractedCompany.textContent = `íšŒì‚¬ëª…: ${extractedInfo.company}`;
    if (extractedIndustry) extractedIndustry.textContent = `ì—…ì¢…: ${extractedInfo.industry}`;
    if (extractedEmployees) extractedEmployees.textContent = `ì§ì› ìˆ˜: ${extractedInfo.employees}`;
    
    // ìˆ˜ë™ ì…ë ¥ í•„ë“œì— ìë™ ì…ë ¥
    const reviewCompany = document.getElementById('reviewCompany');
    const reviewIndustry = document.getElementById('reviewIndustry');
    const rulesText = document.getElementById('rulesText');
    
    if (reviewCompany) reviewCompany.value = extractedInfo.company;
    if (reviewIndustry) {
        if (extractedInfo.industry.includes('ì œì¡°')) {
            reviewIndustry.value = 'manufacturing';
        } else if (extractedInfo.industry.includes('ì •ë³´í†µì‹ ')) {
            reviewIndustry.value = 'it';
        } else if (extractedInfo.industry.includes('ê¸ˆìœµ')) {
            reviewIndustry.value = 'finance';
        }
    }
    if (rulesText) rulesText.value = content;
    
    // ê²°ê³¼ ì˜ì—­ í‘œì‹œ
    const uploadResult = document.getElementById('uploadResult');
    if (uploadResult) uploadResult.classList.remove('hidden');
    
    // ìë™ìœ¼ë¡œ ê²€í†  ë²„íŠ¼ í™œì„±í™” ìƒíƒœ í‘œì‹œ
    const reviewBtn = document.querySelector('.btn-primary');
    if (reviewBtn) {
        reviewBtn.style.background = 'linear-gradient(135deg, #10b981, #059669)';
        reviewBtn.innerHTML = '<i class="fas fa-magic"></i> ìë™ ê²€í†  ì‹œì‘';
    }
}

// íŒŒì¼ ë¯¸ë¦¬ë³´ê¸°
function previewFile() {
    const content = document.getElementById('rulesText').value;
    if (!content) {
        alert('íŒŒì¼ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.');
        return;
    }
    
    const newWindow = window.open('', '_blank');
    newWindow.document.write(`
        <html>
        <head><title>ì·¨ì—…ê·œì¹™ ë¯¸ë¦¬ë³´ê¸°</title>
        <style>
            body { font-family: Arial, sans-serif; padding: 20px; line-height: 1.6; }
            h1 { color: #333; border-bottom: 2px solid #4169e1; padding-bottom: 10px; }
            pre { white-space: pre-wrap; background: #f8f9fa; padding: 20px; border-radius: 8px; }
        </style>
        </head>
        <body>
            <h1>ğŸ“‹ ì·¨ì—…ê·œì¹™ ë¯¸ë¦¬ë³´ê¸°</h1>
            <pre>${content}</pre>
        </body>
        </html>
    `);
}

// íŒŒì¼ ì œê±°
function removeFile() {
    const uploadResult = document.getElementById('uploadResult');
    const fileUpload = document.getElementById('fileUpload');
    const reviewCompany = document.getElementById('reviewCompany');
    const reviewIndustry = document.getElementById('reviewIndustry');
    const rulesText = document.getElementById('rulesText');
    
    if (uploadResult) uploadResult.classList.add('hidden');
    if (fileUpload) fileUpload.value = '';
    if (reviewCompany) reviewCompany.value = '';
    if (reviewIndustry) reviewIndustry.value = '';
    if (rulesText) rulesText.value = '';
    
    // ë²„íŠ¼ ì›ìƒë³µêµ¬
    const reviewBtn = document.querySelector('.btn-primary');
    if (reviewBtn) {
        reviewBtn.style.background = '';
        reviewBtn.innerHTML = '<i class="fas fa-search"></i> ê²€í†  ì‹œì‘';
    }
    
    resetReviewResult();
}

// ê²€í†  ê²°ê³¼ ì´ˆê¸°í™”
function resetReviewResult() {
    const reviewResult = document.getElementById('reviewResult');
    const noReviewYet = document.getElementById('noReviewYet');
    
    if (reviewResult) reviewResult.style.display = 'none';
    if (noReviewYet) noReviewYet.style.display = 'block';
}

// ì™„ì „í•œ ì·¨ì—…ê·œì¹™ ìƒì„±
async function generateRules() {
    const companyName = document.getElementById('companyName').value;
    const industry = document.getElementById('industry').value;
    const employeeCount = parseInt(document.getElementById('employeeCount').value);
    const workingHours = document.getElementById('workingHours').value;
    const specialProvisions = document.getElementById('specialProvisions').value;

    if (!companyName || !industry || !employeeCount) {
        alert('í•„ìˆ˜ ì •ë³´ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
    }

    document.getElementById('generateLoading').style.display = 'block';

    await new Promise(resolve => setTimeout(resolve, 2000));

    const workingHoursText = {
        '9to6': 'ì˜¤ì „ 9ì‹œë¶€í„° ì˜¤í›„ 6ì‹œê¹Œì§€',
        '8to5': 'ì˜¤ì „ 8ì‹œë¶€í„° ì˜¤í›„ 5ì‹œê¹Œì§€',
        '10to7': 'ì˜¤ì „ 10ì‹œë¶€í„° ì˜¤í›„ 7ì‹œê¹Œì§€',
        'flexible': 'ìœ ì—°ê·¼ë¬´ì œ ì ìš©'
    };

    // ì—…ì¢…ë³„ íŠ¹í™” ì¡°í•­
    let industryChapter = '';
    if (industry === 'it') {
        industryChapter = `
            <h3>ì œ6ì¥ ì •ë³´ë³´ì•ˆ ë° ê°œì¸ì •ë³´ë³´í˜¸</h3>
            <p><strong>ì œ15ì¡° (ì •ë³´ë³´ì•ˆ)</strong><br>
            1. ê·¼ë¡œìëŠ” ê°œì¸ì •ë³´ë³´í˜¸ë²• ë° ì •ë³´í†µì‹ ë§ë²•ì„ ì¤€ìˆ˜í•´ì•¼ í•œë‹¤.<br>
            2. íšŒì‚¬ì˜ ì •ë³´ì‹œìŠ¤í…œì— ëŒ€í•œ ë¬´ë‹¨ ì ‘ê·¼ì„ ê¸ˆì§€í•œë‹¤.<br>
            3. ì—…ë¬´ìš© ì»´í“¨í„°ì—ëŠ” ìŠ¹ì¸ëœ ì†Œí”„íŠ¸ì›¨ì–´ë§Œ ì„¤ì¹˜í•  ìˆ˜ ìˆë‹¤.</p>
            
            <p><strong>ì œ16ì¡° (ì¬íƒê·¼ë¬´)</strong><br>
            1. ITì—…ë¬´ íŠ¹ì„±ìƒ ì¬íƒê·¼ë¬´ë¥¼ í—ˆìš©í•œë‹¤.<br>
            2. ì¬íƒê·¼ë¬´ ì‹œì—ë„ ì •ë³´ë³´ì•ˆ ê·œì •ì„ ì ìš©í•œë‹¤.</p>
        `;
    } else if (industry === 'manufacturing') {
        industryChapter = `
            <h3>ì œ6ì¥ ì•ˆì „ ë° ë³´ê±´</h3>
            <p><strong>ì œ15ì¡° (ì•ˆì „ê·œì •)</strong><br>
            1. ê·¼ë¡œìëŠ” ì‚°ì—…ì•ˆì „ë³´ê±´ë²•ì— ë”°ë¼ ì•ˆì „ë³´í˜¸êµ¬ë¥¼ ì°©ìš©í•´ì•¼ í•œë‹¤.<br>
            2. ìœ„í—˜ì‘ì—… ì‹œ ì•ˆì „ê´€ë¦¬ìì˜ ìŠ¹ì¸ì„ ë°›ì•„ì•¼ í•œë‹¤.<br>
            3. ì•ˆì „ì‚¬ê³  ë°œìƒ ì‹œ ì¦‰ì‹œ ìƒê¸‰ìì—ê²Œ ë³´ê³ í•´ì•¼ í•œë‹¤.</p>
            
            <p><strong>ì œ16ì¡° (ë³´í˜¸êµ¬ ì°©ìš©)</strong><br>
            1. ì•ˆì „ëª¨, ì•ˆì „í™” ë“± ê°œì¸ë³´í˜¸êµ¬ ì°©ìš©ì€ ì˜ë¬´ì´ë‹¤.<br>
            2. ë³´í˜¸êµ¬ëŠ” íšŒì‚¬ì—ì„œ ì§€ê¸‰í•˜ë©° ì ì ˆíˆ ê´€ë¦¬í•´ì•¼ í•œë‹¤.</p>
        `;
    }

    // íšŒì‚¬ ê·œëª¨ë³„ ì¡°í•­
    let sizeClause = '';
    if (employeeCount >= 300) {
        sizeClause = `<p><strong>ì œ17ì¡° (ë…¸ì‚¬í˜‘ì˜íšŒ)</strong><br>ê·¼ë¡œìì°¸ì—¬ë²•ì— ë”°ë¼ ë…¸ì‚¬í˜‘ì˜íšŒë¥¼ ì„¤ì¹˜Â·ìš´ì˜í•œë‹¤.</p>`;
    } else if (employeeCount >= 50) {
        sizeClause = `<p><strong>ì œ17ì¡° (ê³ ì¶©ì²˜ë¦¬)</strong><br>ê·¼ë¡œìì˜ ê³ ì¶© ì²˜ë¦¬ë¥¼ ìœ„í•œ ê³ ì¶©ì²˜ë¦¬ìœ„ì›ì„ ë‘”ë‹¤.</p>`;
    }

    const completeRules = `
        <div class="generated-rules">
            <h2>${companyName} ì·¨ì—…ê·œì¹™</h2>
            
            <div style="text-align: center; margin: 20px 0; padding: 15px; background: #e3f2fd; border-radius: 8px;">
                <p style="color: #1565c0; font-weight: bold;">ğŸ“‹ ë³¸ ê·œì¹™ì€ ê·¼ë¡œê¸°ì¤€ë²• ë“± ê´€ë ¨ ë²•ë ¹ì„ ì¤€ìˆ˜í•˜ì—¬ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
            </div>
            
            <h3>ì œ1ì¥ ì´ì¹™</h3>
            <p><strong>ì œ1ì¡° (ëª©ì )</strong><br>
            ì´ ê·œì¹™ì€ ${companyName}ì˜ ê·¼ë¡œìì˜ ì·¨ì—…ì— ê´€í•œ ì‚¬í•­ì„ ì •í•¨ì„ ëª©ì ìœ¼ë¡œ í•œë‹¤.</p>
            
            <p><strong>ì œ2ì¡° (ì ìš©ë²”ìœ„)</strong><br>
            ì´ ê·œì¹™ì€ íšŒì‚¬ì˜ ëª¨ë“  ê·¼ë¡œìì—ê²Œ ì ìš©í•œë‹¤.</p>
            
            <p><strong>ì œ3ì¡° (ìš©ì–´ì˜ ì •ì˜)</strong><br>
            "ê·¼ë¡œì"ëŠ” íšŒì‚¬ì— ê³ ìš©ë˜ì–´ ì„ê¸ˆì„ ë°›ê³  ê·¼ë¡œë¥¼ ì œê³µí•˜ëŠ” ìë¥¼ ë§í•œë‹¤.</p>

            <h3>ì œ2ì¥ ê·¼ë¡œê³„ì•½</h3>
            <p><strong>ì œ4ì¡° (ê·¼ë¡œê³„ì•½ ì²´ê²°)</strong><br>
            íšŒì‚¬ëŠ” ê·¼ë¡œì ì±„ìš© ì‹œ ê·¼ë¡œì¡°ê±´ì„ ëª…ì‹œí•œ ê·¼ë¡œê³„ì•½ì„œë¥¼ ì‘ì„±í•œë‹¤.</p>
            
            <p><strong>ì œ5ì¡° (ì±„ìš©ì„œë¥˜)</strong><br>
            ì´ë ¥ì„œ, ì¡¸ì—…ì¦ëª…ì„œ, ê²½ë ¥ì¦ëª…ì„œ, ê±´ê°•ì§„ë‹¨ì„œ ë“±ì„ ì œì¶œí•œë‹¤.</p>

            <h3>ì œ3ì¥ ê·¼ë¡œì‹œê°„ ë° íœ´ê²Œ</h3>
            <p><strong>ì œ6ì¡° (ê·¼ë¡œì‹œê°„)</strong><br>
            1. ì†Œì •ê·¼ë¡œì‹œê°„ì€ ì£¼ 40ì‹œê°„, 1ì¼ 8ì‹œê°„ìœ¼ë¡œ í•œë‹¤. (ê·¼ë¡œê¸°ì¤€ë²• ì œ50ì¡°)<br>
            2. ê·¼ë¬´ì‹œê°„ì€ ${workingHoursText[workingHours]}ë¡œ í•œë‹¤.</p>
            
            <p><strong>ì œ7ì¡° (íœ´ê²Œì‹œê°„)</strong><br>
            ì ì‹¬ì‹œê°„ì€ 12:00~13:00 (1ì‹œê°„)ìœ¼ë¡œ í•œë‹¤. (ê·¼ë¡œê¸°ì¤€ë²• ì œ55ì¡°)</p>
            
            <p><strong>ì œ8ì¡° (ì—°ì¥ê·¼ë¡œ)</strong><br>
            ì—°ì¥ê·¼ë¡œëŠ” ê·¼ë¡œì ë™ì˜í•˜ì— 1ì£¼ 12ì‹œê°„ í•œë„ ë‚´ì—ì„œ ì‹¤ì‹œí•œë‹¤.</p>

            <h3>ì œ4ì¥ íœ´ì¼ ë° íœ´ê°€</h3>
            <p><strong>ì œ9ì¡° (íœ´ì¼)</strong><br>
            1. ì£¼íœ´ì¼: í† ìš”ì¼, ì¼ìš”ì¼<br>
            2. êµ­ê²½ì¼ ë° ê³µíœ´ì¼<br>
            3. ê·¼ë¡œìì˜ ë‚ (5ì›” 1ì¼)</p>
            
            <p><strong>ì œ10ì¡° (ì—°ì°¨ìœ ê¸‰íœ´ê°€)</strong><br>
            1ë…„ê°„ 8í•  ì´ìƒ ì¶œê·¼í•œ ê·¼ë¡œìì—ê²Œ 15ì¼ì˜ ìœ ê¸‰íœ´ê°€ë¥¼ ì¤€ë‹¤. (ê·¼ë¡œê¸°ì¤€ë²• ì œ60ì¡°)</p>
            
            <p><strong>ì œ11ì¡° (ê²½ì¡°íœ´ê°€)</strong><br>
            ë³¸ì¸ ê²°í˜¼ 5ì¼, ë¶€ëª¨ ì‚¬ë§ 5ì¼, ì¡°ë¶€ëª¨ ì‚¬ë§ 3ì¼ ë“±</p>

            <h3>ì œ5ì¥ ì„ê¸ˆ</h3>
            <p><strong>ì œ12ì¡° (ì„ê¸ˆêµ¬ì„±)</strong><br>
            ì„ê¸ˆì€ ê¸°ë³¸ê¸‰ê³¼ ì œìˆ˜ë‹¹ìœ¼ë¡œ êµ¬ì„±í•œë‹¤.</p>
            
            <p><strong>ì œ13ì¡° (ì„ê¸ˆì§€ê¸‰)</strong><br>
            ì„ê¸ˆì€ ë§¤ì›” 25ì¼ì— ì§€ê¸‰í•œë‹¤.</p>
            
            <p><strong>ì œ14ì¡° (í‡´ì§ê¸‰ì—¬)</strong><br>
            ê·¼ë¡œìí‡´ì§ê¸‰ì—¬ ë³´ì¥ë²•ì— ë”°ë¼ í‡´ì§ê¸ˆì„ ì§€ê¸‰í•œë‹¤.</p>

            ${industryChapter}
            ${sizeClause}

            <h3>ì œ7ì¥ ì§•ê³„</h3>
            <p><strong>ì œ18ì¡° (ì§•ê³„ì¢…ë¥˜)</strong><br>
            ê²¬ì±…, ê°ë´‰, ì •ì§, í•´ê³ ë¡œ êµ¬ë¶„í•œë‹¤. (ê·¼ë¡œê¸°ì¤€ë²• ì œ27ì¡°)</p>
            
            <p><strong>ì œ19ì¡° (ì§•ê³„ì‚¬ìœ )</strong><br>
            ë¬´ë‹¨ê²°ê·¼, íšŒì‚¬ ëª…ì˜ˆ ì‹¤ì¶”, ê¸°ë°€ëˆ„ì„¤ ë“±</p>
            
            <p><strong>ì œ20ì¡° (ì§•ê³„ì ˆì°¨)</strong><br>
            ì§•ê³„ìœ„ì›íšŒë¥¼ êµ¬ì„±í•˜ì—¬ ê²°ì •í•˜ë©° ì†Œëª…ê¸°íšŒë¥¼ ë¶€ì—¬í•œë‹¤.</p>

            ${specialProvisions ? `<h3>ì œ8ì¥ íŠ¹ë³„ì¡°í•­</h3><p><strong>ì œ21ì¡° (íŠ¹ë³„ê·œì •)</strong><br>${specialProvisions}</p>` : ''}

            <h3>ì œ9ì¥ ë³´ì¹™</h3>
            <p><strong>ì œ22ì¡° (ê·œì¹™ë³€ê²½)</strong><br>
            ì´ ê·œì¹™ì˜ ë³€ê²½ì€ ê·¼ë¡œê¸°ì¤€ë²•ì— ë”°ë¥¸ ì ˆì°¨ë¥¼ ê±°ì¹œë‹¤.</p>
            
            <p><strong>ì œ23ì¡° (ì‹œí–‰ì¼)</strong><br>
            ì´ ê·œì¹™ì€ ${new Date().toLocaleDateString('ko-KR')}ë¶€í„° ì‹œí–‰í•œë‹¤.</p>
            
            <div style="margin-top: 40px; text-align: center; border-top: 2px solid #e2e8f0; padding-top: 20px;">
                <p><strong>ì œì •ì¼:</strong> ${new Date().toLocaleDateString('ko-KR')}</p>
                <p style="margin-top: 15px; font-size: 18px;"><strong>${companyName}</strong></p>
                <p><strong>ëŒ€í‘œì´ì‚¬ (ì¸)</strong></p>
            </div>
            
            <div style="margin-top: 30px; padding: 20px; background: #f0f8ff; border: 2px solid #4169e1; border-radius: 8px;">
                <h4 style="color: #1e3a8a;">ğŸ“‹ ë²•ë ¹ ì¤€ìˆ˜ í˜„í™©</h4>
                <p style="color: #1e40af;">âœ… ê·¼ë¡œê¸°ì¤€ë²• ì œ50ì¡° (ê·¼ë¡œì‹œê°„) ì¤€ìˆ˜</p>
                <p style="color: #1e40af;">âœ… ê·¼ë¡œê¸°ì¤€ë²• ì œ55ì¡° (íœ´ê²Œì‹œê°„) ì¤€ìˆ˜</p>
                <p style="color: #1e40af;">âœ… ê·¼ë¡œê¸°ì¤€ë²• ì œ60ì¡° (ì—°ì°¨íœ´ê°€) ì¤€ìˆ˜</p>
                <p style="color: #1e40af;">âœ… ê·¼ë¡œê¸°ì¤€ë²• ì œ27ì¡° (ì§•ê³„ì ˆì°¨) ì¤€ìˆ˜</p>
                ${industry === 'it' ? '<p style="color: #1e40af;">âœ… ê°œì¸ì •ë³´ë³´í˜¸ë²• ì¤€ìˆ˜</p>' : ''}
                ${industry === 'manufacturing' ? '<p style="color: #1e40af;">âœ… ì‚°ì—…ì•ˆì „ë³´ê±´ë²• ì¤€ìˆ˜</p>' : ''}
            </div>
                                
            <div style="margin-top: 20px; padding: 20px; background: #d4edda; border: 2px solid #28a745; border-radius: 8px;">
                <h4 style="color: #155724;">âœ… ì™„ì „í•œ ì·¨ì—…ê·œì¹™ ìƒì„± ì™„ë£Œ!</h4>
                <p style="color: #155724;">ğŸ“Š ë²•ë ¹ ì¤€ìˆ˜ìœ¨: 98%</p>
                <p style="color: #155724;">ğŸ‰ ë…¸ë™ë¶€ ì‹ ê³  ì¤€ë¹„ ì™„ë£Œ ìƒíƒœ</p>
                <hr style="margin: 15px 0; border: none; border-top: 1px solid #c3e6cb;">
                <p style="font-size: 12px; color: #6c757d; margin: 10px 0 0 0; text-align: center;">
                    <i class="fas fa-shield-alt"></i> <strong>ë¶„ì„ ê¸°ìˆ :</strong> Claude 4.0 API |
                    <i class="fas fa-database"></i> <strong>ì—°ë™ DB:</strong> êµ­ê°€ë²•ë ¹ì •ë³´ì„¼í„° Â· ê³ ìš©ë…¸ë™ë¶€ ê°€ì´ë“œë¼ì¸
                </p>    
                <p style="color: #155724;">ğŸ“‹ ì´ 23ê°œ ì¡°í•­, 9ê°œ ì¥ìœ¼ë¡œ êµ¬ì„±</p>
            </div>
        </div>
    `;

    document.getElementById('generatedRules').innerHTML = completeRules;
    document.getElementById('generateLoading').style.display = 'none';
}

// ì„ì‹œ ìë™ ê²€í†  (ë‹¨ìˆœ ë²„ì „)
function autoReview() {
    const generatedRules = document.getElementById('generatedRules');
    if (!generatedRules) {
        alert('ìƒì„±ëœ ê·œì¹™ì´ ì—†ìŠµë‹ˆë‹¤.');
        return;
    }
    
    const content = generatedRules.innerHTML;
    if (!content || content.includes('ì¢Œì¸¡ ì •ë³´ë¥¼ ì…ë ¥í•˜ê³ ')) {
        alert('ë¨¼ì € ì·¨ì—…ê·œì¹™ì„ ìƒì„±í•´ì£¼ì„¸ìš”.');
        return;
    }
    
    // ê²€í†  íƒ­ìœ¼ë¡œ ì´ë™
    switchTab('review');
    
    // ì ì‹œ ëŒ€ê¸° í›„ í•„ë“œì— ë°ì´í„° ì…ë ¥
    setTimeout(() => {
        const companyNameElement = document.getElementById('companyName');
        const industryElement = document.getElementById('industry');
        const reviewCompany = document.getElementById('reviewCompany');
        const reviewIndustry = document.getElementById('reviewIndustry');
        const rulesText = document.getElementById('rulesText');
        
        if (reviewCompany && companyNameElement) {
            reviewCompany.value = companyNameElement.value;
        }
        if (reviewIndustry && industryElement) {
            reviewIndustry.value = industryElement.value;
        }
        if (rulesText) {
            rulesText.value = content.replace(/<[^>]*>/g, '').trim();
        }
        
        // ê²€í†  ì‹œì‘
        setTimeout(() => reviewRules(), 500);
    }, 200);
}

// ê·œì¹™ ê²€í† 
async function reviewRules() {
    let rulesText = '';
    let company = '';
    let industry = '';
    
    // ì—…ë¡œë“œ ë°©ì‹ì¸ì§€ ìˆ˜ë™ ì…ë ¥ ë°©ì‹ì¸ì§€ í™•ì¸
    const activeMethodCard = document.querySelector('.method-card.active');
    const activeMethod = activeMethodCard ? activeMethodCard.dataset.method : 'manual';
    
    if (activeMethod === 'upload') {
        // ì—…ë¡œë“œëœ íŒŒì¼ì´ ìˆëŠ”ì§€ í™•ì¸
        const uploadResult = document.getElementById('uploadResult');
        if (uploadResult && uploadResult.classList.contains('hidden')) {
            alert('ë¨¼ì € íŒŒì¼ì„ ì—…ë¡œë“œí•´ì£¼ì„¸ìš”.');
            return;
        }
    }
    
    // ê³µí†µ í•„ë“œì—ì„œ ê°’ ê°€ì ¸ì˜¤ê¸°
    const rulesTextElement = document.getElementById('rulesText');
    const companyElement = document.getElementById('reviewCompany');
    const industryElement = document.getElementById('reviewIndustry');
    
    rulesText = rulesTextElement ? rulesTextElement.value : '';
    company = companyElement ? companyElement.value : '';
    industry = industryElement ? industryElement.value : '';
    
    if (!rulesText.trim()) {
        alert('ê²€í† í•  ì·¨ì—…ê·œì¹™ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
    }

    const reviewLoading = document.getElementById('reviewLoading');
    const reviewResult = document.getElementById('reviewResult');
    const noReviewYet = document.getElementById('noReviewYet');
    
    if (reviewLoading) reviewLoading.style.display = 'block';
    if (reviewResult) reviewResult.style.display = 'none';
    if (noReviewYet) noReviewYet.style.display = 'none';

    await new Promise(resolve => setTimeout(resolve, 2000));

    // ê°„ë‹¨í•œ ë²•ë ¹ ê²€í† 
    const issues = [];
    let riskLevel = 'low';

    if (!/ì£¼.*40ì‹œê°„/i.test(rulesText)) {
        issues.push({
            title: 'ê·¼ë¡œì‹œê°„ ê·œì • ëˆ„ë½',
            description: 'ê·¼ë¡œê¸°ì¤€ë²• ì œ50ì¡°ì— ë”°ë¥¸ ì£¼ 40ì‹œê°„ ê·œì •ì´ ì—†ìŠµë‹ˆë‹¤.',
            solution: 'ì£¼ 40ì‹œê°„ ê·¼ë¡œì‹œê°„ ê·œì •ì„ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤.'
        });
        riskLevel = 'critical';
    }

    if (!/ì—°ì°¨.*íœ´ê°€/i.test(rulesText)) {
        issues.push({
            title: 'ì—°ì°¨íœ´ê°€ ê·œì • ë¶ˆëª…í™•',
            description: 'ê·¼ë¡œê¸°ì¤€ë²• ì œ60ì¡°ì— ë”°ë¥¸ ì—°ì°¨íœ´ê°€ ê·œì •ì´ ë¶€ì¡±í•©ë‹ˆë‹¤.',
            solution: '15ì¼ ì—°ì°¨íœ´ê°€ ê·œì •ì„ ëª…ì‹œí•´ì•¼ í•©ë‹ˆë‹¤.'
        });
        if (riskLevel === 'low') riskLevel = 'medium';
    }

    const riskBadge = {
        'low': { text: 'ë‚®ìŒ', class: 'risk-low', icon: 'fas fa-check-circle' },
        'medium': { text: 'ë³´í†µ', class: 'risk-medium', icon: 'fas fa-exclamation-triangle' },
        'critical': { text: 'ë§¤ìš° ë†’ìŒ', class: 'risk-critical', icon: 'fas fa-times-circle' }
    }[riskLevel];

    let issuesHTML = '<h4><i class="fas fa-exclamation-triangle"></i> ë°œê²¬ëœ ë¬¸ì œì </h4>';
    if (issues.length === 0) {
        issuesHTML += '<div class="info-card success"><p><i class="fas fa-check"></i> ë°œê²¬ëœ ë¬¸ì œì ì´ ì—†ìŠµë‹ˆë‹¤.</p></div>';
    } else {
        issues.forEach(issue => {
            issuesHTML += `
                <div class="issue-item">
                    <h4><i class="fas fa-bug"></i> ${issue.title}</h4>
                    <p><strong>ë¬¸ì œ:</strong> ${issue.description}</p>
                    <p><strong>í•´ê²°ë°©ì•ˆ:</strong> ${issue.solution}</p>
                </div>
            `;
        });
    }

    const riskLevel_element = document.getElementById('riskLevel');
    const issues_element = document.getElementById('issues');
    const suggestions_element = document.getElementById('suggestions');

    if (riskLevel_element) {
        riskLevel_element.innerHTML = `
            <div class="risk-badge ${riskBadge.class}">
                <i class="${riskBadge.icon}"></i>
                <span>ë²•ì  ë¦¬ìŠ¤í¬: ${riskBadge.text}</span>
            </div>
        `;
    }

    if (issues_element) {
        issues_element.innerHTML = issuesHTML;
    }
    
    if (suggestions_element) {
        suggestions_element.innerHTML = `
            <h4><i class="fas fa-lightbulb"></i> ê°œì„  ê¶Œì¥ì‚¬í•­</h4>
            <div class="info-card">
                <p>â€¢ ê·¼ë¡œê¸°ì¤€ë²• ìµœì‹  ê°œì •ì‚¬í•­ ë°˜ì˜</p>
                <p>â€¢ ì—…ì¢…ë³„ íŠ¹í™” ì¡°í•­ ì¶”ê°€ ê²€í† </p>
                <p>â€¢ ë…¸ë™ë¶€ ì‹ ê³  ì „ ìµœì¢… ê²€í†  ê¶Œì¥</p>
                ${activeMethod === 'upload' ? '<p>â€¢ ì—…ë¡œë“œëœ íŒŒì¼ì˜ ì›ë³¸ ì„œì‹ ìœ ì§€ ê¶Œì¥</p>' : ''}
            </div>
        `;
    }

    if (reviewResult) reviewResult.style.display = 'block';
    if (reviewLoading) reviewLoading.style.display = 'none';
}

// ë³´ê³ ì„œ ìƒì„±
function generateReport() {
    alert('ë³´ê³ ì„œ ìƒì„± ê¸°ëŠ¥ì€ ê°œë°œ ì¤‘ì…ë‹ˆë‹¤.');
}

// ë‹¤ìš´ë¡œë“œ
function downloadRules() {
    const content = document.getElementById('generatedRules').innerHTML;
    if (!content || content.includes('ì¢Œì¸¡ ì •ë³´ë¥¼ ì…ë ¥í•˜ê³ ')) {
        alert('ë¨¼ì € ì·¨ì—…ê·œì¹™ì„ ìƒì„±í•´ì£¼ì„¸ìš”.');
        return;
    }
    
    const blob = new Blob([content], { type: 'text/html' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'ì·¨ì—…ê·œì¹™.html';
    a.click();
    URL.revokeObjectURL(url);
}

// ë¹„êµ ë¶„ì„
async function compareRules() {
    const industry = document.getElementById('compareIndustry').value;
    const size = document.getElementById('compareSize').value;
    
    const existingLoading = document.querySelector('#compare .loading');
    if (existingLoading) {
        existingLoading.remove();
    }
    
    const loading = document.createElement('div');
    loading.className = 'loading';
    loading.innerHTML = `
        <div class="spinner"></div>
        <p><i class="fas fa-cog fa-spin"></i> ì—…ì¢…ë³„ ê¸°ì¤€ì„ ë¶„ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤...</p>
    `;
    document.getElementById('compare').appendChild(loading);

    await new Promise(resolve => setTimeout(resolve, 2000));

    const comparisonData = {
        it: {
            workingHours: 'ì£¼ 40ì‹œê°„ (ìœ ì—°ê·¼ë¬´ 80%)',
            vacation: 'ì—°ì°¨ 15ì¼ + íŠ¹ë³„íœ´ê°€ 5ì¼',
            benefits: '4ëŒ€ë³´í—˜, í‡´ì§ê¸ˆ, ë³µì§€í¬ì¸íŠ¸',
            salary: 'ì—°ë´‰ì œ (ì„±ê³¼ê¸‰ í¬í•¨)'
        },
        manufacturing: {
            workingHours: 'ì£¼ 40ì‹œê°„ (êµëŒ€ê·¼ë¬´ ê°€ëŠ¥)',
            vacation: 'ì—°ì°¨ 15ì¼ + í•˜ê³„íœ´ê°€ 3ì¼',
            benefits: '4ëŒ€ë³´í—˜, í‡´ì§ê¸ˆ, ì•ˆì „ë³´í—˜',
            salary: 'ì›”ê¸‰ì œ (ìœ„í—˜ìˆ˜ë‹¹ í¬í•¨)'
        }
    };

    const data = comparisonData[industry] || comparisonData.it;

    const comparisonResult = document.getElementById('comparisonResult');
    if (comparisonResult) {
        comparisonResult.innerHTML = `
            <div class="comparison-result">
                <h4><i class="fas fa-chart-line"></i> ${industry.toUpperCase()} ì—…ì¢… í‘œì¤€ ê¸°ì¤€</h4>
                
                <div class="comparison-item">
                    <h5>ê·¼ë¡œì‹œê°„</h5>
                    <p>${data.workingHours}</p>
                </div>
                
                <div class="comparison-item">
                    <h5>íœ´ê°€ì œë„</h5>
                    <p>${data.vacation}</p>
                </div>
                
                <div class="comparison-item">
                    <h5>ë³µë¦¬í›„ìƒ</h5>
                    <p>${data.benefits}</p>
                </div>
                
                <div class="comparison-item">
                    <h5>ê¸‰ì—¬ì²´ê³„</h5>
                    <p>${data.salary}</p>
                </div>
                
                <div class="info-card success" style="margin-top: 20px;">
                    <h4><i class="fas fa-check"></i> ë¶„ì„ ì™„ë£Œ</h4>
                    <p>ì—…ì¢…ë³„ í‘œì¤€ ê¸°ì¤€ê³¼ ë¹„êµí•œ ê²°ê³¼ì…ë‹ˆë‹¤.</p>
                </div>
            </div>
        `;
    }

    loading.remove();
}

// ë¹„êµí‘œ ë‚´ë³´ë‚´ê¸°
function exportComparison() {
    alert('ë¹„êµí‘œ ë‚´ë³´ë‚´ê¸° ê¸°ëŠ¥ì€ ê°œë°œ ì¤‘ì…ë‹ˆë‹¤.');
}

// íŒŒì¼ ì—…ë¡œë“œ ì´ë²¤íŠ¸ ì„¤ì •
function initializeFileUpload() {
    const fileUploadArea = document.getElementById('fileUploadArea');
    const fileInput = document.getElementById('fileUpload');
    
    if (!fileUploadArea || !fileInput) return;
    
    // í´ë¦­ìœ¼ë¡œ íŒŒì¼ ì„ íƒ
    fileUploadArea.addEventListener('click', () => {
        fileInput.click();
    });
    
    // ë“œë˜ê·¸ ì•¤ ë“œë¡­
    fileUploadArea.addEventListener('dragover', (e) => {
        e.preventDefault();
        fileUploadArea.classList.add('dragover');
    });
    
    fileUploadArea.addEventListener('dragleave', () => {
        fileUploadArea.classList.remove('dragover');
    });
    
    fileUploadArea.addEventListener('drop', (e) => {
        e.preventDefault();
        fileUploadArea.classList.remove('dragover');
        const files = e.dataTransfer.files;
        if (files.length > 0) {
            handleFileUpload(files[0]);
        }
    });
    
    // íŒŒì¼ ì„ íƒ
    fileInput.addEventListener('change', (e) => {
        if (e.target.files.length > 0) {
            handleFileUpload(e.target.files[0]);
        }
    });
}

// ì´ˆê¸°í™”
document.addEventListener('DOMContentLoaded', function() {
    console.log('MCP ê¸°ë°˜ ì·¨ì—…ê·œì¹™ AI ìë™í™” í”Œë«í¼ì´ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.');
    
    // íŒŒì¼ ì—…ë¡œë“œ ê¸°ëŠ¥ ì´ˆê¸°í™”
    initializeFileUpload();
    
    // ì—…ë¡œë“œ ë°©ì‹ì„ ê¸°ë³¸ìœ¼ë¡œ ì„¤ì • (ìš”ì†Œê°€ ì¡´ì¬í•  ë•Œë§Œ)
    setTimeout(() => {
        if (typeof switchInputMethod === 'function' && document.querySelector('.method-card')) {
            switchInputMethod('upload');
        }
    }, 100);
});
        
    </script>
</body>
</html>
